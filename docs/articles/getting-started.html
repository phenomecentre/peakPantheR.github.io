<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started with the peakPantheR package • peakPantheR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with the peakPantheR package">
<meta property="og:description" content="peakPantheR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">peakPantheR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting-started.html">Getting Started with the peakPantheR package</a>
    </li>
    <li>
      <a href="../articles/parallel-annotation.html">Parallel Annotation</a>
    </li>
    <li>
      <a href="../articles/peakPantheR-GUI.html">peakPantheR Graphical User Interface</a>
    </li>
    <li>
      <a href="../articles/real-time-annotation.html">Real Time Annotation</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/phenomecentre/peakPantheR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="getting-started_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting Started with the peakPantheR package</h1>
            
            <h4 data-toc-skip class="date">2020-10-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/phenomecentre/peakPantheR/blob/master/vignettes/getting-started.Rmd" class="external-link"><code>vignettes/getting-started.Rmd</code></a></small>
      <div class="hidden name"><code>getting-started.Rmd</code></div>

    </div>

    
    
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
  document.querySelector("h1").className = "title";
});
</script><script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
  var links = document.links;  
  for (var i = 0, linksLength = links.length; i < linksLength; i++)
    if (links[i].hostname != window.location.hostname)
      links[i].target = '_blank';
});
</script><p><strong>Package</strong>: <em><a href="https://bioconductor.org/packages/3.13/peakPantheR" class="external-link">peakPantheR</a></em><br><strong>Authors</strong>: Arnaud Wolfer<br></p>
<p>Package for <em>Peak Picking and ANnoTation of High resolution Experiments in R</em>, implemented in <code>R</code> and <code>Shiny</code></p>
<div id="overview" class="section level1">
<h1 class="hasAnchor">
<a href="#overview" class="anchor" aria-hidden="true"></a>Overview</h1>
<p><code>peakPantheR</code> implements functions to detect, integrate and report pre-defined features in MS files (<em>e.g. compounds, fragments, adducts, …</em>).</p>
<p>It is designed for:</p>
<ul>
<li>
<strong>Real time</strong> feature detection and integration (see <a href="real-time-annotation.html">Real Time Annotation</a>)
<ul>
<li>process <code>multiple</code> compounds in <code>one</code> file at a time</li>
</ul>
</li>
<li>
<strong>Post-acquisition</strong> feature detection, integration and reporting (see <a href="parallel-annotation.html">Parallel Annotation</a>)
<ul>
<li>process <code>multiple</code> compounds in <code>multiple</code> files in <code>parallel</code>, store results in a <code>single</code> object</li>
</ul>
</li>
</ul>
<p><code>peakPantheR</code> can process LC/MS data files in <em>NetCDF</em>, <em>mzML</em>/<em>mzXML</em> and <em>mzData</em> format as data import is achieved using Bioconductor’s <em><a href="https://bioconductor.org/packages/3.13/mzR" class="external-link">mzR</a></em> package.</p>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor" aria-hidden="true"></a>Installation</h1>
<p>To install <code>peakPantheR</code> from Bioconductor:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"BiocManager"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
    <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"BiocManager"</span><span class="op">)</span>

<span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/BiocManager/man/install.html" class="external-link">install</a></span><span class="op">(</span><span class="st">"peakPantheR"</span><span class="op">)</span></code></pre></div>
<p>Install the development version of <code>peakPantheR</code> directly from GitHub with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Install devtools</span>
<span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://devtools.r-lib.org/" class="external-link">"devtools"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"phenomecentre/peakPantheR"</span><span class="op">)</span></code></pre></div>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor" aria-hidden="true"></a>Getting Started</h2>
<p>To get started <code>peakPantheR</code>’s <a href="peakPantheR-GUI.html">graphical user interface</a> implements all the functions to detect and integrate <strong>multiple</strong> compounds in <strong>multiple</strong> files in <strong>parallel</strong> and store results in a <strong>single</strong> object. It can be employed to integrate a large number of expected features across a dataset:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/phenomecentre/peakPantheR" class="external-link">peakPantheR</a></span><span class="op">)</span>

<span class="fu"><a href="../reference/peakPantheR_start_GUI.html">peakPantheR_start_GUI</a></span><span class="op">(</span>browser <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#  To exit press ESC in the command line</span></code></pre></div>
<p><img src="../man/figures/example-UI.png" width="700px" style="display: block; margin: auto;"></p>
<p>The GUI is to be preferred to understand the methodology, select the best parameters on a subset of the samples before running the command line, or to visually explore results.</p>
<p>If a very high number of samples and features is to be processed, <code>peakpantheR</code>’s command line functions are more efficient, as they can be integrated in scripts and the reporting automated.</p>
</div>
</div>
<div id="input-data" class="section level1">
<h1 class="hasAnchor">
<a href="#input-data" class="anchor" aria-hidden="true"></a>Input Data</h1>
<p>Both real time and parallel compound integration require a common set of information:</p>
<ul>
<li>Path(s) to <code>netCDF</code> / <code>mzML</code> MS file(s)</li>
<li>An expected region of interest (<code>RT</code> / <code>m/z</code> window) for each compound.</li>
</ul>
<div id="ms-files" class="section level2">
<h2 class="hasAnchor">
<a href="#ms-files" class="anchor" aria-hidden="true"></a>MS files</h2>
<p>For demonstration purpose we can annotate a set a set of raw MS spectra (in <em>NetCDF</em> format) provided by the <em><a href="https://bioconductor.org/packages/3.13/faahKO" class="external-link">faahKO</a></em> package. Briefly, this subset of the data from <span class="citation">(Saghatelian et al. 2004)</span> invesigate the metabolic consequences of knocking out the fatty acid amide hydrolase (FAAH) gene in mice. The dataset consists of samples from the spinal cords of 6 knock-out and 6 wild-type mice. Each file contains data in centroid mode acquired in positive ion mode form 200-600 m/z and 2500-4500 seconds.</p>
<p>Below we install the <em><a href="https://bioconductor.org/packages/3.13/faahKO" class="external-link">faahKO</a></em> package and locate raw CDF files of interest:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"BiocManager"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
    <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"BiocManager"</span><span class="op">)</span>

<span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/BiocManager/man/install.html" class="external-link">install</a></span><span class="op">(</span><span class="st">"faahKO"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://dx.doi.org/10.1021/bi0480335" class="external-link">faahKO</a></span><span class="op">)</span>
<span class="co">## file paths</span>
<span class="va">input_spectraPaths</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'cdf/KO/ko15.CDF'</span>, package <span class="op">=</span> <span class="st">"faahKO"</span><span class="op">)</span>,
                        <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'cdf/KO/ko16.CDF'</span>, package <span class="op">=</span> <span class="st">"faahKO"</span><span class="op">)</span>,
                        <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'cdf/KO/ko18.CDF'</span>, package <span class="op">=</span> <span class="st">"faahKO"</span><span class="op">)</span><span class="op">)</span>
<span class="va">input_spectraPaths</span>
<span class="co">#&gt; [1] "C:/R/R-4.1.0/library/faahKO/cdf/KO/ko15.CDF"</span>
<span class="co">#&gt; [2] "C:/R/R-4.1.0/library/faahKO/cdf/KO/ko16.CDF"</span>
<span class="co">#&gt; [3] "C:/R/R-4.1.0/library/faahKO/cdf/KO/ko18.CDF"</span></code></pre></div>
</div>
<div id="expected-regions-of-interest" class="section level2">
<h2 class="hasAnchor">
<a href="#expected-regions-of-interest" class="anchor" aria-hidden="true"></a>Expected regions of interest</h2>
<p>Expected regions of interest (targeted features) are specified using the following information:</p>
<ul>
<li>
<code>cpdID</code> (numeric)</li>
<li>
<code>cpdName</code> (character)</li>
<li>
<code>rtMin</code> (sec)</li>
<li>
<code>rtMax</code> (sec)</li>
<li>
<code>rt</code> (sec, optional / <code>NA</code>)</li>
<li>
<code>mzMin</code> (m/z)</li>
<li>
<code>mzMax</code> (m/z)</li>
<li>
<code>mz</code> (m/z, optional / <code>NA</code>)</li>
</ul>
<p>Below we define 2 features of interest that are present in the <em><a href="https://bioconductor.org/packages/3.13/faahKO" class="external-link">faahKO</a></em> dataset and can be employed in subsequent vignettes:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># targetFeatTable</span>
<span class="va">input_targetFeatTable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></span><span class="op">(</span><span class="op">)</span>, <span class="fl">2</span>, <span class="fl">8</span>, dimnames<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>, 
                        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cpdID"</span>, <span class="st">"cpdName"</span>, <span class="st">"rtMin"</span>, <span class="st">"rt"</span>, <span class="st">"rtMax"</span>, <span class="st">"mzMin"</span>, 
                        <span class="st">"mz"</span>, <span class="st">"mzMax"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, stringsAsFactors<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>
<span class="va">input_targetFeatTable</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"Cpd 1"</span>, <span class="fl">3310.</span>, <span class="fl">3344.888</span>, <span class="fl">3390.</span>, <span class="fl">522.194778</span>, 
                                <span class="fl">522.2</span>, <span class="fl">522.205222</span><span class="op">)</span>
<span class="va">input_targetFeatTable</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="st">"Cpd 2"</span>, <span class="fl">3280.</span>, <span class="fl">3385.577</span>, <span class="fl">3440.</span>, <span class="fl">496.195038</span>,
                                <span class="fl">496.2</span>, <span class="fl">496.204962</span><span class="op">)</span>
<span class="va">input_targetFeatTable</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">input_targetFeatTable</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span><span class="op">]</span>, 
                                            <span class="va">as.numeric</span><span class="op">)</span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="10%">
<col width="12%">
<col width="10%">
<col width="13%">
<col width="10%">
<col width="16%">
<col width="10%">
<col width="16%">
</colgroup>
<thead><tr class="header">
<th align="center">cpdID</th>
<th align="center">cpdName</th>
<th align="center">rtMin</th>
<th align="center">rt</th>
<th align="center">rtMax</th>
<th align="center">mzMin</th>
<th align="center">mz</th>
<th align="center">mzMax</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">Cpd 1</td>
<td align="center">3310</td>
<td align="center">3344.888</td>
<td align="center">3390</td>
<td align="center">522.194778</td>
<td align="center">522.2</td>
<td align="center">522.205222</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">Cpd 2</td>
<td align="center">3280</td>
<td align="center">3385.577</td>
<td align="center">3440</td>
<td align="center">496.195038</td>
<td align="center">496.2</td>
<td align="center">496.204962</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="preparing-input-for-the-graphical-user-interface" class="section level1">
<h1 class="hasAnchor">
<a href="#preparing-input-for-the-graphical-user-interface" class="anchor" aria-hidden="true"></a>Preparing input for the graphical user interface</h1>
<p>While the command line functions accept Data.Frame and vectors as input, the graphical user interface (GUI) will read the same information from a set of <code>.csv</code> files, or an already set-up <code>peakPantheRAnnotation</code> object in <code>.RData</code> format.</p>
<p>We can now generate GUI input files for the <em><a href="https://bioconductor.org/packages/3.13/faahKO" class="external-link">faahKO</a></em> example dataset presented previously:</p>
<div id="peakpantherannotation--rdata" class="section level2">
<h2 class="hasAnchor">
<a href="#peakpantherannotation--rdata" class="anchor" aria-hidden="true"></a><em>peakPantheRAnnotation</em> .RData</h2>
<p>A <code>peakPantheRAnnotation</code> (previously annotated or not) can be passed as input in a <code>.RData</code> file. The <code>peakPantheRAnnotation</code> object must be named <em>annotationObject</em>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://dx.doi.org/10.1021/bi0480335" class="external-link">faahKO</a></span><span class="op">)</span>

<span class="co"># Define the file paths (3 samples)</span>
<span class="va">input_spectraPaths</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'cdf/KO/ko15.CDF'</span>, package <span class="op">=</span> <span class="st">"faahKO"</span><span class="op">)</span>,
                        <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'cdf/KO/ko16.CDF'</span>, package <span class="op">=</span> <span class="st">"faahKO"</span><span class="op">)</span>,
                        <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'cdf/KO/ko18.CDF'</span>, package <span class="op">=</span> <span class="st">"faahKO"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Define the targeted features (2 features)</span>
<span class="va">input_targetFeatTable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></span><span class="op">(</span><span class="op">)</span>, <span class="fl">2</span>, <span class="fl">8</span>, dimnames<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,
                        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cpdID"</span>, <span class="st">"cpdName"</span>, <span class="st">"rtMin"</span>, <span class="st">"rt"</span>, <span class="st">"rtMax"</span>, <span class="st">"mzMin"</span>,
                        <span class="st">"mz"</span>, <span class="st">"mzMax"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, stringsAsFactors<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>
<span class="va">input_targetFeatTable</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ID-1"</span>, <span class="st">"Cpd 1"</span>, <span class="fl">3310.</span>, <span class="fl">3344.888</span>, <span class="fl">3390.</span>,
                                <span class="fl">522.194778</span>, <span class="fl">522.2</span>, <span class="fl">522.205222</span><span class="op">)</span>
<span class="va">input_targetFeatTable</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ID-1"</span>, <span class="st">"Cpd 2"</span>, <span class="fl">3280.</span>, <span class="fl">3385.577</span>, <span class="fl">3440.</span>,
                                <span class="fl">496.195038</span>, <span class="fl">496.2</span>, <span class="fl">496.204962</span><span class="op">)</span>
<span class="va">input_targetFeatTable</span><span class="op">[</span>,<span class="fl">3</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">input_targetFeatTable</span><span class="op">[</span>,<span class="fl">3</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span>, <span class="va">as.numeric</span><span class="op">)</span>

<span class="co"># Define some random compound and spectra metadata</span>
<span class="co"># cpdMetadata</span>
<span class="va">input_cpdMetadata</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'a'</span>,<span class="st">'b'</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, nrow<span class="op">=</span><span class="fl">2</span>, ncol<span class="op">=</span><span class="fl">2</span>,
                            dimnames<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'testcol1'</span>,<span class="st">'testcol2'</span><span class="op">)</span><span class="op">)</span>,
                            byrow<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>, stringsAsFactors<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>
<span class="co"># spectraMetadata</span>
<span class="va">input_spectraMetadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'c'</span>,<span class="st">'d'</span>,<span class="st">'e'</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span>, nrow<span class="op">=</span><span class="fl">3</span>,
                            ncol<span class="op">=</span><span class="fl">2</span>,
                            dimnames<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'testcol1'</span>,<span class="st">'testcol2'</span><span class="op">)</span><span class="op">)</span>,
                            byrow<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>, stringsAsFactors<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>

<span class="co"># Initialise a simple peakPantheRAnnotation object</span>
<span class="co"># [3 files, 2 features, no uROI, no FIR]</span>
<span class="va">initAnnotation</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/peakPantheRAnnotation.html">peakPantheRAnnotation</a></span><span class="op">(</span>spectraPaths<span class="op">=</span><span class="va">input_spectraPaths</span>,
                                        targetFeatTable<span class="op">=</span><span class="va">input_targetFeatTable</span>,
                                        cpdMetadata<span class="op">=</span><span class="va">input_cpdMetadata</span>,
                                        spectraMetadata<span class="op">=</span><span class="va">input_spectraMetadata</span><span class="op">)</span>

<span class="co"># Rename and save the annotation to disk</span>
<span class="va">annotationObject</span> <span class="op">&lt;-</span> <span class="va">initAnnotation</span>
<span class="fu"><a href="https://rdrr.io/r/base/save.html" class="external-link">save</a></span><span class="op">(</span><span class="va">annotationObject</span>,
        file <span class="op">=</span> <span class="st">'./example_annotation_ppR_UI.RData'</span>,
        compress<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
<div id="csv-file-input" class="section level2">
<h2 class="hasAnchor">
<a href="#csv-file-input" class="anchor" aria-hidden="true"></a>CSV file input</h2>
<p>Another input option for the GUI input consists of a set of <code>.csv</code> files.</p>
<div id="targeted-features" class="section level3">
<h3 class="hasAnchor">
<a href="#targeted-features" class="anchor" aria-hidden="true"></a>Targeted features</h3>
<p>Targeted features are defined in a <code>.csv</code> with as rows each feature to target (the first row must be the column name), and as columns the fit parameters to use. At minimum the following parameters must be defined:</p>
<p><code>cpdID</code>, <code>cpdName</code>, <code>rtMin</code>, <code>rt</code>, <code>rtMax</code>, <code>mzMin</code>, <code>mz</code>, <code>mzMax</code></p>
<p>If <code>uROI</code> and <code>FIR</code> are to be set, the following columns must be provided:</p>
<p><code>cpdID</code>, <code>cpdName</code>, <code>ROI_rt</code>, <code>ROI_mz</code>, <code>ROI_rtMin</code>, <code>ROI_rtMax</code>, <code>ROI_mzMin</code>, <code>ROI_mzMax</code>, <code>uROI_rtMin</code>, <code>uROI_rtMax</code>, <code>uROI_mzMin</code>, <code>uROI_mzMax</code>, <code>uROI_rt</code>, <code>uROI_mz</code>, <code>FIR_rtMin</code>, <code>FIR_rtMax</code>, <code>FIR_mzMin</code>, <code>FIR_mzMax</code></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define targeted features without uROI and FIR (2 features)</span>
<span class="va">input_targetFeatTable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></span><span class="op">(</span><span class="op">)</span>, <span class="fl">2</span>, <span class="fl">8</span>, dimnames<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,
                        <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cpdID"</span>, <span class="st">"cpdName"</span>, <span class="st">"rtMin"</span>, <span class="st">"rt"</span>, <span class="st">"rtMax"</span>, <span class="st">"mzMin"</span>,
                        <span class="st">"mz"</span>, <span class="st">"mzMax"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, stringsAsFactors<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>
<span class="va">input_targetFeatTable</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ID-1"</span>, <span class="st">"Cpd 1"</span>, <span class="fl">3310.</span>, <span class="fl">3344.888</span>, <span class="fl">3390.</span>,
                                <span class="fl">522.194778</span>, <span class="fl">522.2</span>, <span class="fl">522.205222</span><span class="op">)</span>
<span class="va">input_targetFeatTable</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ID-1"</span>, <span class="st">"Cpd 2"</span>, <span class="fl">3280.</span>, <span class="fl">3385.577</span>, <span class="fl">3440.</span>,
                                <span class="fl">496.195038</span>, <span class="fl">496.2</span>, <span class="fl">496.204962</span><span class="op">)</span>
<span class="va">input_targetFeatTable</span><span class="op">[</span>,<span class="fl">3</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">input_targetFeatTable</span><span class="op">[</span>,<span class="fl">3</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span>, <span class="va">as.numeric</span><span class="op">)</span>

<span class="co"># save to disk</span>
<span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">input_targetFeatTable</span>,
            file <span class="op">=</span> <span class="st">'./1-fitParams_example_UI.csv'</span>,
            row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="10%">
<col width="12%">
<col width="10%">
<col width="13%">
<col width="10%">
<col width="16%">
<col width="10%">
<col width="16%">
</colgroup>
<thead><tr class="header">
<th align="center">cpdID</th>
<th align="center">cpdName</th>
<th align="center">rtMin</th>
<th align="center">rt</th>
<th align="center">rtMax</th>
<th align="center">mzMin</th>
<th align="center">mz</th>
<th align="center">mzMax</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">ID-1</td>
<td align="center">Cpd 1</td>
<td align="center">3310</td>
<td align="center">3344.888</td>
<td align="center">3390</td>
<td align="center">522.194778</td>
<td align="center">522.2</td>
<td align="center">522.205222</td>
</tr>
<tr class="even">
<td align="center">ID-1</td>
<td align="center">Cpd 2</td>
<td align="center">3280</td>
<td align="center">3385.577</td>
<td align="center">3440</td>
<td align="center">496.195038</td>
<td align="center">496.2</td>
<td align="center">496.204962</td>
</tr>
</tbody>
</table>
</div>
<div id="files-to-process-and-spectra-metadata-optional" class="section level3">
<h3 class="hasAnchor">
<a href="#files-to-process-and-spectra-metadata-optional" class="anchor" aria-hidden="true"></a>Files to process and spectra metadata (optional)</h3>
<p>It is possible to select the files on disk directly through the GUI, or to select a <code>.csv</code> file containing each file path as well as spectra metadata. Each row correspond to a different spectra (the first row must define the column names) while columns correspond to the path on disk and metadata. At minimum a column <code>filepath</code> must be present, with subsequent columns defining metadata properties.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define the spectra paths and metada</span>
<span class="va">input_spectraMeta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></span><span class="op">(</span><span class="op">)</span>, <span class="fl">3</span>, <span class="fl">3</span>,
                        dimnames<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"filepath"</span>,<span class="st">"testcol1"</span>,<span class="st">"testcol2"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                        stringsAsFactors<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>
<span class="va">input_spectraMeta</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'cdf/KO/ko15.CDF'</span>, package <span class="op">=</span> <span class="st">"faahKO"</span><span class="op">)</span>,
                            <span class="st">"c"</span>, <span class="fl">3</span><span class="op">)</span>
<span class="va">input_spectraMeta</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'cdf/KO/ko16.CDF'</span>, package <span class="op">=</span> <span class="st">"faahKO"</span><span class="op">)</span>,
                            <span class="st">"d"</span>, <span class="fl">4</span><span class="op">)</span>
<span class="va">input_spectraMeta</span><span class="op">[</span><span class="fl">3</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'cdf/KO/ko18.CDF'</span>, package <span class="op">=</span> <span class="st">"faahKO"</span><span class="op">)</span>,
                            <span class="st">"e"</span>, <span class="fl">5</span><span class="op">)</span>

<span class="co"># save to disk</span>
<span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">input_spectraMeta</span>,
            file <span class="op">=</span> <span class="st">'./2-spectraMetaWPath_example_UI.csv'</span>,
            row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<table style="width:94%;" class="table">
<colgroup>
<col width="63%">
<col width="15%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th align="center">filepath</th>
<th align="center">testcol1</th>
<th align="center">testcol2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">C:/R/R-4.1.0/library/faahKO/cdf/KO/ko15.CDF</td>
<td align="center">c</td>
<td align="center">3</td>
</tr>
<tr class="even">
<td align="center">C:/R/R-4.1.0/library/faahKO/cdf/KO/ko16.CDF</td>
<td align="center">d</td>
<td align="center">4</td>
</tr>
<tr class="odd">
<td align="center">C:/R/R-4.1.0/library/faahKO/cdf/KO/ko18.CDF</td>
<td align="center">e</td>
<td align="center">5</td>
</tr>
</tbody>
</table>
</div>
<div id="feature-meatadata-optional" class="section level3">
<h3 class="hasAnchor">
<a href="#feature-meatadata-optional" class="anchor" aria-hidden="true"></a>Feature meatadata (optional)</h3>
<p>It is possible to define some feature metadata, with targeted features as rows (same order as the fitting parameters, first row defining the column names), and as columns the metadata.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define the feature metada</span>
<span class="va">input_featMeta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></span><span class="op">(</span><span class="op">)</span>, <span class="fl">2</span>, <span class="fl">2</span>,
                    dimnames<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"testcol1"</span>,<span class="st">"testcol2"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                    stringsAsFactors<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>
<span class="va">input_featMeta</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="fl">1</span><span class="op">)</span>
<span class="va">input_featMeta</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"b"</span>, <span class="fl">2</span><span class="op">)</span>

<span class="co"># save to disk</span>
<span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">input_featMeta</span>,
            file <span class="op">=</span> <span class="st">'./3-featMeta_example_UI.csv'</span>,
            row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<table style="width:31%;" class="table">
<colgroup>
<col width="15%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th align="center">testcol1</th>
<th align="center">testcol2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">a</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">b</td>
<td align="center">2</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="see-also" class="section level1">
<h1 class="hasAnchor">
<a href="#see-also" class="anchor" aria-hidden="true"></a>See Also</h1>
<ul>
<li><a href="real-time-annotation.html">Real Time Annotation</a></li>
<li><a href="parallel-annotation.html">Parallel Annotation</a></li>
<li><a href="peakPantheR-GUI.html">Graphical user interface use</a></li>
</ul>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor" aria-hidden="true"></a>References</h1>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Saghatelian04" class="csl-entry">
Saghatelian, A., S. A. Trauger, E. J. Want, E. G. Hawkins, G. Siuzdak, and B. F. Cravatt. 2004. <span>“Assignment of Endogenous Substrates to Enzymes by Global Metabolite Profiling.”</span> <em>Biochemistry</em> 43: 14332–39. <a href="http://dx.doi.org/10.1021/bi0480335" class="external-link">http://dx.doi.org/10.1021/bi0480335</a>.
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Arnaud Wolfer, Goncalo Correia.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
